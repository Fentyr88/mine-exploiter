package mine_exploiter;

import java.util.Scanner;

public class MineExplosionGame {
	
	// Representa al jugador.
    private Player player;   
    
    // Representa el tablero de juego.
    private Board board;      
    
    // Límite de tiempo para el juego.
    private int timeLimit;  
    
    public MineExplosionGame(String playerName, Board board, int timeLimit) {
        // Inicializa al jugador con el nombre proporcionado.
        this.player = new Player(playerName);
        
        // Utiliza la instancia de Board proporcionada.
        this.board = board;
        
        // Establece el límite de tiempo para el juego.
        this.timeLimit = timeLimit;
    }

    
    public void startGame() {
        System.out.println("El juego Explotaminas ha comenzado!!!");

     // Tiempo de inicio del juego
        long startTime = System.currentTimeMillis(); 
        
     // Verifica si el tiempo límite no se ha agotado
        
        while (System.currentTimeMillis() - startTime < timeLimit * 1000) { 
        	
        	// Muestra el estado actual del juego
            displayGameStatus(); 
            
             // Realiza el turno del jugador
            performPlayerTurn(); 
        }

        System.out.println("Se acabo el tiempo... Tu puntuacion final es: " + player.getScore());
    }

    private void displayGameStatus() {
    	
        // Implementar la lógica para mostrar el estado actual del tablero, la puntuación, etc.
        System.out.println("Actual puntuacion: " + player.getScore());
        board.displayBoard();
    }

    private void performPlayerTurn() {
    	
        Scanner scanner = new Scanner(System.in);

        // Lógica para que el jugador seleccione una casilla para desenterrar.
        
        // Aquí puedes solicitar la entrada del jugador y luego procesar su elección.
        System.out.print("Ingresar fila (0-" + (board.getRows() - 1) + "): ");
        int row = scanner.nextInt();

        System.out.print("Ingresar columna (0-" + (board.getColumns() - 1) + "): ");
        int column = scanner.nextInt();

        // Lógica para verificar la casilla seleccionada y actualizar la puntuación.
        if (board.uncoverSquare(row, column)) { // Suponiendo que tengas un método uncoverSquare() en la clase Board
        	player.increaseScore();
        	System.out.println("Boom - La mina exploto");
            System.out.println("Puntos ganados: "+player.getScore());
            
        } else {
            System.out.println("Aqui no hay ninguna mina. Intenta otra vez");
        }
    }
}       