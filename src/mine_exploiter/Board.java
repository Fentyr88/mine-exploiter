package mine_exploiter;

import java.util.Random;

public class Board {
	
	// Representa el tablero como una matriz de casillas.
    private Square[][] squares;
    
    // Número de filas en el tablero.
    private int rows;
    
    // Número de columnas en el tablero.
    private int columns;
    
    // Número de minas en el tablero.
    private int numMines;
    
    

    public Board(int rows, int columns, int numMines) {
        this.rows = rows;
        this.columns = columns;
        this.squares = new Square[rows][columns];
        this.numMines = numMines;
        
        
        // Inicializa todas las casillas del tablero.
        initializeBoard();
        
        // Coloca las minas en posiciones aleatorias del tablero.
        placeMines(numMines);
    }
    
    // Crea una nueva casilla en cada posición del tablero.
    private void initializeBoard() {
        for (int i = 0; i < rows; i++) {
            for (int j = 0; j < columns; j++) {
                squares[i][j] = new Square();
            }
        }
    }

    private void placeMines(int numMines) {
        Random random = new Random();

        for (int i = 0; i < numMines; i++) {
            int row = random.nextInt(rows);
            int column = random.nextInt(columns);

            if (!squares[row][column].hasMine()) {
            	
            	// Coloca una mina en una casilla si aún no tiene una.
                squares[row][column].placeMine();
            } else {
            	
            	// Intenta nuevamente si la casilla ya tiene una mina.
                i--;
            }
        }
    }   

    public boolean uncoverSquare(int row, int column) {
        Square selectedSquare = squares[row][column];

        if (!selectedSquare.isUncovered()) {
            selectedSquare.uncover();

            if (selectedSquare.hasMine()) {
            	// El jugador encontró una mina
            	numMines--;
                return true; 
            }
        }
        
     // No hay mina en la casilla seleccionada o ya fue descubierta
        return false; 
    }

    public boolean hasMines() {
        return numMines > 0;
    }

    public void displayBoard() {
    	
        // Implementar la lógica para mostrar el tablero, marcando las casillas descubiertas y las minas.
        
    }

    public int getRows() {
        return rows;
    }

    public int getColumns() {
        return columns;
    }

}


       